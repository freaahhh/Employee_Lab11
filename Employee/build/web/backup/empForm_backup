
<%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<sql:setDataSource var="myDatasource" driver="org.apache.derby.jdbc.ClientDriver" url="jdbc:derby://localhost:1527/Java DB" user="app" password="app"/>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <title>Employee Form</title>
         <style>  
            .form-box {
                width: 350px;     
                padding: 10px;
            }
            .form-box form {
                display: grid;
                width: 300px;
                grid-template-columns: 120px 150px;
                row-gap: 8px;
                column-gap: 3px;
            }
            .form-box input[type="text"] {
                width: 100%;
            }
        </style>
    </head>
    <body>
        
        <%-- retrieve parameters and insert into the database --%>
        <c:set var="NAME" value="${param.NAME}"/>
        <c:set var="SALARY" value="${param.SALARY}"/>
        <c:set var="DESIGNATION" value="${param.DESIGNATION}"/>
        <c:if test="${(NAME!=null)&&(SALARY!=null)&&(DESIGNATION!=null)}" var="result">
            <sql:update dataSource="${myDatasource}">
                INSERT INTO STAFF(NAME, SALARY, DESIGNATION)
                VALUES (?,?,?)
                <sql:param value="${NAME}"/>
                <sql:param value="${SALARY}"/>
                <sql:param value="${DESIGNATION}"/>
            </sql:update>
            <p>Data inserted successfully!</p>
        </c:if>
            
        <h2>Add New Employee</h2>
        <div class="form-box">
            <form action="empForm.jsp" method="POST">
                <label for="NAME">Name:</label>
                <input type="text" id="NAME" name="NAME" required>

                <label for="SALARY">Salary:</label>
                <input type="number" id="SALARY" name="SALARY" required>

                <label for="DESIGNATION">Designation:</label>
                <input type="text" id="DESIGNATION" name="DESIGNATION" required>

                <input type="submit" value="Save">
            </form>
        </div>
    </body>
</html>
